# server {
#     listen 80;
#     server_name yourdomain.com;
#     root /var/www/html;
#     index index.php index.html;

#     # XenForo specific configurations
#     location / {
#         try_files $uri $uri/ /index.php?$query_string;
#     }

#     # Handle XenForo admin area
#     location /admin.php {
#         try_files $uri /admin.php?$query_string;
#     }

#     # Block access to sensitive files
#     location ~ /\. {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~* \.(txt|log)$ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~ ^/(config|src|library|internal_data)/ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     # PHP-FPM configuration
#     location ~ \.php$ {
#         try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.php)(/.+)$;
#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.php;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param HTTPS $cloudflare_https;
#         include fastcgi_params;

#         # XenForo specific FastCGI params
#         fastcgi_param HTTP_MOD_REWRITE On;
#     }

#     # Cache static files
#     location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#         access_log off;
#     }

#     # Gzip compression
#     gzip on;
#     gzip_vary on;
#     gzip_min_length 1000;
#     gzip_types
#         text/plain
#         text/css
#         application/json
#         application/javascript
#         text/xml
#         application/xml
#         application/xml+rss
#         text/javascript
#         image/svg+xml;

#     # Client body size limit
#     client_max_body_size 50M;

#     # Rate limiting for login attempts
#     location ~ ^/(login|admin\.php) {
#         limit_req zone=login burst=5 nodelay;
#         try_files $uri /index.php?$query_string;
#     }

#     # Error and access logs
#     access_log /var/log/nginx/xenforo_access.log;
#     error_log /var/log/nginx/xenforo_error.log;
# }

# # Rate limiting zone definition (should be in http context)
# limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;