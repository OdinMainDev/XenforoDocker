# server {
#     listen 80;
#     server_name yourdomain.onion;
#     root /var/www/html;
#     index index.php index.html;

#     # Security headers for onion service
#     add_header X-Content-Type-Options nosniff;
#     add_header X-Frame-Options DENY;
#     add_header X-XSS-Protection "1; mode=block";
#     add_header Referrer-Policy "strict-origin-when-cross-origin";
#     add_header Onion-Location https://$host$request_uri;

#     # XenForo specific configurations
#     location / {
#         try_files $uri $uri/ /index.php?$query_string;
#     }

#     # Handle XenForo admin area
#     location /admin.php {
#         try_files $uri /admin.php?$query_string;
#     }

#     # Block access to sensitive files
#     location ~ /\. {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~* \.(txt|log)$ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~ ^/(config|src|library|internal_data)/ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     # PHP-FPM configuration
#     location ~ \.php$ {
#         try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.php)(/.+)$;
#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.php;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param HTTPS off;
#         include fastcgi_params;

#         # XenForo specific FastCGI params
#         fastcgi_param HTTP_MOD_REWRITE On;
#     }

#     # Cache static files
#     location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#         access_log off;
#     }

#     # Gzip compression
#     gzip on;
#     gzip_vary on;
#     gzip_min_length 1000;
#     gzip_types
#         text/plain
#         text/css
#         application/json
#         application/javascript
#         text/xml
#         application/xml
#         application/xml+rss
#         text/javascript
#         image/svg+xml;

#     # Client body size limit
#     client_max_body_size 50M;

#     # Rate limiting for login attempts
#     location ~ ^/(login|admin\.php) {
#         limit_req zone=login burst=5 nodelay;
#         try_files $uri /index.php?$query_string;
#     }

#     # Logs
#     access_log /var/log/nginx/onion_access.log;
#     error_log /var/log/nginx/onion_error.log;
# }

# # HTTPS onion service (self-signed certificate)
# server {
#     listen 443 ssl;
#     server_name yourdomain.onion;
#     root /var/www/html;
#     index index.php index.html;

#     # SSL configuration for onion
#     ssl_certificate /etc/nginx/ssl/onion.crt;
#     ssl_certificate_key /etc/nginx/ssl/onion.key;
#     ssl_session_timeout 1d;
#     ssl_session_cache shared:SSL:50m;
#     ssl_session_tickets off;

#     # Modern configuration
#     ssl_protocols TLSv1.2 TLSv1.3;
#     ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
#     ssl_prefer_server_ciphers off;

#     # Security headers for HTTPS onion service
#     add_header X-Content-Type-Options nosniff;
#     add_header X-Frame-Options DENY;
#     add_header X-XSS-Protection "1; mode=block";
#     add_header Referrer-Policy "strict-origin-when-cross-origin";
#     add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";

#     # XenForo specific configurations
#     location / {
#         try_files $uri $uri/ /index.php?$query_string;
#     }

#     # Handle XenForo admin area
#     location /admin.php {
#         try_files $uri /admin.php?$query_string;
#     }

#     # Block access to sensitive files
#     location ~ /\. {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~* \.(txt|log)$ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     location ~ ^/(config|src|library|internal_data)/ {
#         deny all;
#         access_log off;
#         log_not_found off;
#     }

#     # PHP-FPM configuration
#     location ~ \.php$ {
#         try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.php)(/.+)$;
#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.php;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param HTTPS on;
#         include fastcgi_params;

#         # XenForo specific FastCGI params
#         fastcgi_param HTTP_MOD_REWRITE On;
#     }

#     # Cache static files
#     location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#         access_log off;
#     }

#     # Gzip compression
#     gzip on;
#     gzip_vary on;
#     gzip_min_length 1000;
#     gzip_types
#         text/plain
#         text/css
#         application/json
#         application/javascript
#         text/xml
#         application/xml
#         application/xml+rss
#         text/javascript
#         image/svg+xml;

#     # Client body size limit
#     client_max_body_size 50M;

#     # Rate limiting for login attempts
#     location ~ ^/(login|admin\.php) {
#         limit_req zone=login burst=5 nodelay;
#         try_files $uri /index.php?$query_string;
#     }

#     # Logs
#     access_log /var/log/nginx/onion_ssl_access.log;
#     error_log /var/log/nginx/onion_ssl_error.log;
# }